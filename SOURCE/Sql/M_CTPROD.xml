<?xml version="1.0" encoding="utf-8" ?>
<System>
	<M_CTPROD001>
		SELECT C.CUST_CODE
		  ,C.DRAW_TYPE
		  ,C.LCLS_CODE
		  ,L.LCLS_NAME
		  ,C.MCLS_CODE
		  ,M.MCLS_NAME 
		  ,C.SCLS_CODE
		  ,C.PROV_TYPE AS PROV_TYPE
		  ,MN.NAME_NAME AS PROV_NAME		  
		  ,C.ADD_USER
		  ,C.ADD_PC
		  ,C.ADD_DATE
		  ,C.ADD_TIME
		  ,C.LASTUP_USER
		  ,C.LASTUP_PC
		  ,C.LASTUP_DATE
		  ,C.LASTUP_TIME
		FROM M_CTPROD C
		LEFT JOIN M_LCLS L ON C.LCLS_CODE = L.LCLS_CODE 
		LEFT JOIN M_MCLS M ON C.LCLS_CODE = M.LCLS_CODE AND C.MCLS_CODE = M.MCLS_CODE 
		LEFT JOIN M_NAME MN ON MN.NAMECLS_CODE = 'PROV' AND C.PROV_TYPE = MN.NAME_CODE
		WHERE C.CUST_CODE = ? AND C.DRAW_TYPE = ?
	</M_CTPROD001>
	<M_CTPROD002>
		DELETE FROM M_CTPROD 
		WHERE CUST_CODE = ? AND DRAW_TYPE = ? AND LCLS_CODE = ? AND MCLS_CODE = ?
	</M_CTPROD002>
	<M_CTPROD003>
		INSERT INTO M_CTPROD
		(
			CUST_CODE
			,DRAW_TYPE
			,LCLS_CODE
			,MCLS_CODE
			,SCLS_CODE
			,PROV_TYPE
			,ADD_USER
			,ADD_PC
			,ADD_DATE
			,ADD_TIME
			,LASTUP_USER
			,LASTUP_PC
			,LASTUP_DATE
			,LASTUP_TIME
		) 
		VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
	</M_CTPROD003>
	<M_CTPROD004>
		SELECT COUNT(CUST_CODE) FROM M_CTPROD
	</M_CTPROD004>
	<M_CTPROD005>
		SELECT C.CUST_CODE AS '得意先コード' 
			  ,A.CUSTR_NAME AS '得意先名' 
		      ,C.DRAW_TYPE AS '区分'
		      ,N.NAME_NAME AS '区分名'
		      ,C.LCLS_CODE
		      ,L.LCLS_NAME 
		      ,C.MCLS_CODE
		      ,M.MCLS_NAME 
		      ,C.PROV_TYPE AS '支給区分コード'
		      ,MN.NAME_NAME AS '支給区分名'
		      ,C.ADD_USER AS '登録ユーザー名'
		      ,C.ADD_PC AS '登録PC名'
		      ,C.ADD_DATE AS '登録日付'
		      ,C.ADD_TIME AS '登録時刻'
		      ,C.LASTUP_USER AS '最終更新ユーザー名'
		      ,C.LASTUP_PC AS '最終更新PC名'
		      ,C.LASTUP_DATE AS '最終更新日付'
		      ,C.LASTUP_TIME AS '最終更新時刻'
		  FROM M_CTPROD C
		  LEFT JOIN M_CUST A ON A.CUST_CODE = C.CUST_CODE 
		  LEFT JOIN M_NAME N ON N.NAMECLS_CODE = 'DRAW' AND N.NAME_CODE = C.DRAW_TYPE 
		  LEFT JOIN M_LCLS L ON L.LCLS_CODE = C.LCLS_CODE 
		  LEFT JOIN M_MCLS M ON M.LCLS_CODE = C.LCLS_CODE AND M.MCLS_CODE = C.MCLS_CODE 
		  LEFT JOIN M_NAME MN ON MN.NAMECLS_CODE = 'PROV' AND C.PROV_TYPE = MN.NAME_CODE
	</M_CTPROD005>
	
	<!-- ltslong: 07/08/2010 -->
	<M_CTPROD500>
		SELECT
			mc.CUST_CODE,
			mc.DRAW_TYPE,
			mc.LCLS_CODE,
			mc.MCLS_CODE,
			mc.SCLS_CODE,
			mc.PROV_TYPE,
			mc.ADD_USER,
			mc.ADD_PC,
			mc.ADD_DATE,
			mc.ADD_TIME,
			mc.LASTUP_USER,
			mc.LASTUP_PC,
			mc.LASTUP_DATE,
			mc.LASTUP_TIME
		FROM
			M_CTPROD mc
		WHERE
			mc.LCLS_CODE = ? AND
			mc.MCLS_CODE = ? AND
			mc.CUST_CODE = ? AND
			mc.DRAW_TYPE = ? 
	</M_CTPROD500>

</System>